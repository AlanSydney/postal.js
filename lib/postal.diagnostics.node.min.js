module.exports=function(a,b){var c=[],d=function(b,c){var e=0,f=0;return a.each(b,function(b,g){c[g]&&(f++,a.isRegExp(b)&&b.test(c[g])?e++:a.isObject(c[g])&&!a.isArray(c[g])?d(b,c[g])&&e++:a.isEqual(c[g],b)&&e++)}),e===f},e=b.addWireTap(function(b,e){if(!c.length||a.any(c,function(a){return d(a,e)})){if(!JSON)throw"This browser or environment does not provide JSON support";try{console.log(JSON.stringify(e))}catch(f){try{var g=a.extend({},e);delete g.data,console.log(JSON.stringify(g)+"\n	"+"JSON.stringify Error: "+f.message)}catch(h){console.log("Unable to parse data to JSON: "+f)}}}});b.diagnostics=b.diagnostics||{},b.diagnostics.console={clearFilters:function(){c=[]},removeFilter:function(b){c=a.filter(c,function(c){return!a.isEqual(c,b)})},addFilter:function(b){a.isArray(b)||(b=[b]),a.each(b,function(b){(c.length===0||!a.any(c,function(c){return a.isEqual(c,b)}))&&c.push(b)})},getCurrentFilters:function(){return c},removeWireTap:function(){e&&e()}}}